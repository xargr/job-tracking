{"version":3,"file":"static/webpack/static/development/pages/_app.js.3e6963f713c5cc846d09.hot-update.js","sources":["webpack:///./components/context/JobContext.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport uuidv4 from 'uuid/v4';\nimport data from '../../lib/data';\nimport dragAndDrop from '../../lib/dragAndDrop';\n\nconst JobContext = React.createContext();\n\nconst JobContextProvider = ({ children }) => {\n  const [state, setState] = useState();\n\n  const isInitialMount = useRef(true);\n\n  useEffect(() => {\n    if (isInitialMount.current) {\n      isInitialMount.current = false;\n      const initialState = JSON.parse(localStorage.getItem('data')) || data;\n      setState(initialState);\n    } else {\n      localStorage.setItem('data', JSON.stringify(state));\n    }\n  });\n\n  const onDragEnd = result => dragAndDrop(result, state, setState);\n\n  const modalTrigger = data => {\n\n    setState({\n      ...state,\n      isModalOpen: !state.isModalOpen,\n      modalData: {\n        ...state.modalData\n      }\n    });\n  };\n\n  const editModal = data => {\n    console.log(data);\n  };\n\n  const modalSubmit = objValues => {\n    const { company, position } = objValues;\n\n    const uniqId = uuidv4();\n\n    const newJob = {\n      id: uniqId,\n      company,\n      position,\n      date: Date.now()\n    };\n\n    const newJobs = Object.assign({}, state.jobs);\n    newJobs[uniqId] = {\n      ...newJob\n    };\n\n    const colId = state.modalData.columnId;\n    const newColumns = Object.assign({}, state.columns);\n    const oldColumn = newColumns[colId];\n\n    newColumns[colId] = {\n      ...oldColumn,\n      jobs: [...oldColumn.jobs, uniqId]\n    };\n\n    const newState = {\n      ...state,\n      columns: newColumns,\n      jobs: newJobs,\n      isModalOpen: !state.isModalOpen,\n      modalData: { columnId: null, company: '', position: '' }\n    };\n\n    setState(newState);\n  };\n\n  return (\n    <JobContext.Provider\n      value={{ ...state, onDragEnd, modalTrigger, modalSubmit, editModal }}\n    >\n      {children}\n    </JobContext.Provider>\n  );\n};\n\nexport default JobContextProvider;\nexport { JobContext };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AAHA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AAEA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AAFA;AACA;AAIA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AALA;AACA;AAOA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;;A","sourceRoot":""}