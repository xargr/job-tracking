{"version":3,"file":"static/webpack/static/development/pages/index.js.5f335f24c79cfc21822e.hot-update.js","sources":["webpack:///./components/context/JobContext.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport uuidv4 from 'uuid/v4';\nimport data from '../../lib/data';\nimport dragAndDrop from '../../lib/dragAndDrop';\n\nconst JobContext = React.createContext();\n\nconst JobContextProvider = ({ children }) => {\n  const [state, setState] = useState();\n\n  const isInitialMount = useRef(true);\n\n  useEffect(() => {\n    if (isInitialMount.current) {\n      isInitialMount.current = false;\n      const initialState = JSON.parse(localStorage.getItem('data')) || data;\n      setState(initialState);\n    } else {\n      localStorage.setItem('data', JSON.stringify(state));\n    }\n  });\n\n  const onDragEnd = result => dragAndDrop(result, state, setState);\n\n  const modalTrigger = data => {\n    setState({\n      ...state,\n      isModalOpen: !state.isModalOpen,\n      modalData: {\n        ...state.modalData,\n        columnId: data\n      }\n    });\n  };\n\n  const modalSubmit = modalValues => {\n    const { company, position, columnId, id } = modalValues;\n\n    console.log(modalValues);\n\n    if (columnId) {\n\n      const newJobs = {\n        ...state.jobs,\n        [id]: {\n          \n        }\n      }\n\n      const newColumns = {\n        ...state.columns\n      }\n\n      const newState = {\n        ...state,\n        jobs: newJobs,\n        columns: newColumns,\n        isModalOpen: !state.isModalOpen,\n        modalData: {\n          columnId: null,\n          company: '',\n          position: ''\n        }\n      };\n  \n      setState(newState);\n      return;\n    }\n\n    const uniqId = uuidv4();\n\n    const newJob = {\n      id: uniqId,\n      company,\n      position,\n      date: Date.now()\n    };\n\n    const newJobs = {\n      ...state.jobs,\n      [uniqId]: newJob\n    };\n\n    const selectedColumnId = state.modalData.columnId;\n    const selectedColumn = state.columns[selectedColumnId];\n\n    const newColumns = {\n      ...state.columns,\n      [selectedColumnId]: {\n        ...selectedColumn,\n        jobs: [...selectedColumn.jobs, uniqId]\n      }\n    };\n\n    const newState = {\n      ...state,\n      jobs: newJobs,\n      columns: newColumns,\n      isModalOpen: !state.isModalOpen,\n      modalData: {\n        columnId: null,\n        company: '',\n        position: ''\n      }\n    };\n\n    setState(newState);\n  };\n\n  const editModal = (job, columnId) => {\n    const { company, position, id } = job;\n\n    const newState = {\n      ...state,\n      isModalOpen: !state.isModalOpen,\n      modalData: {\n        columnId: columnId,\n        company,\n        position,\n        jobId: id\n      }\n    };\n\n    setState(newState);\n  };\n\n  return (\n    <JobContext.Provider\n      value={{ ...state, onDragEnd, modalTrigger, modalSubmit, editModal }}\n    >\n      {children}\n    </JobContext.Provider>\n  );\n};\n\nexport default JobContextProvider;\nexport { JobContext };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAFA;AAHA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAEA;AACA;AAMA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AALA;AACA;AAWA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AAIA;AACA;AACA;AACA;AAIA;AAJA;AACA;AAOA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AALA;AACA;AAWA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAHA;AACA;AAUA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;;A","sourceRoot":""}