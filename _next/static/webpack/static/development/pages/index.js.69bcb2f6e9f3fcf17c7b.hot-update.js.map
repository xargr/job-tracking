{"version":3,"file":"static/webpack/static/development/pages/index.js.69bcb2f6e9f3fcf17c7b.hot-update.js","sources":["webpack:///./components/JobsPanel/JobsPanel.js"],"sourcesContent":["import React from 'react';\nimport FeatureList from './FeatureList';\nimport ModalForm from '../ModalForm';\nimport EditModalForm from '../EditModalForm';\n\nclass JobsPanel extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      column: 'wishlist',\n      data: {},\n      updateData: {},\n      updateIndex: null,\n      updateColumn: ''\n    };\n    this.columns = ['wishlist', 'applied', 'interview', 'offer', 'rejected'];\n  }\n\n  componentDidMount() {\n    this.loadLocalStorage();\n\n    window.addEventListener('click', event => {\n      if (this.state.isOpen) {\n        // create dom element\n        const elem = document.createElement('div');\n        const div = elem.setAttribute('class', 'overlay');\n\n        // compare created dom element and element that clicked on\n        const isOuterClick = elem.isEqualNode(event.target);\n\n        // if is equal set state to close modal\n        if (isOuterClick) {\n          this.setState({\n            isOpen: !this.state.isOpen,\n            updateData: {},\n            updateIndex: null,\n            updateColumn: ''\n          });\n        }\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', () => {});\n  }\n\n  loadLocalStorage = () => {\n    const localData = JSON.parse(localStorage.getItem('data'));\n\n    if (localData) {\n      this.setState({ data: localData });\n    }\n  };\n\n  clickAddJob = column => {\n    this.setState({\n      isOpen: !this.state.isOpen,\n      column\n    });\n  };\n\n  handleModalData = data => {\n    this.setState(\n      {\n        isOpen: !this.state.isOpen\n      },\n      () => {\n        this.saveDataToLocalStorage(data);\n      }\n    );\n  };\n\n  saveDataToLocalStorage = data => {\n    if (window) {\n      const { column } = this.state;\n\n      const oldStorage = JSON.parse(localStorage.getItem('data'));\n\n      if (oldStorage && oldStorage[column]) {\n        const obj = oldStorage;\n        obj[column] = [...oldStorage[column], data];\n        localStorage.setItem('data', JSON.stringify(obj));\n        this.loadLocalStorage();\n      } else if (oldStorage && !oldStorage[column]) {\n        const obj = Object.assign(oldStorage, { [column]: [data] });\n        localStorage.setItem('data', JSON.stringify(obj));\n        this.loadLocalStorage();\n      } else {\n        const obj = {};\n        obj[column] = [data];\n        localStorage.setItem('data', JSON.stringify(obj));\n        this.loadLocalStorage();\n      }\n    }\n  };\n\n  updateItem = (column, item, index) => {\n    this.setState({\n      isOpen: !this.state.isOpen,\n      updateColumn: column,\n      updateIndex: index,\n      updateItem: { ...item }\n    });\n  };\n\n  handleEditModalData = (data, updateIndex, updateColumn) => {\n    if (window) {\n      const oldStorage = JSON.parse(localStorage.getItem('data'));\n\n      if (oldStorage && oldStorage[updateColumn]) {\n        const obj = oldStorage;\n        obj[updateColumn][updateIndex] = { ...data };\n        localStorage.setItem('data', JSON.stringify(obj));\n        this.loadLocalStorage();\n        this.setState({\n          isOpen: !this.state.isOpen,\n          updateData: {},\n          updateIndex: null,\n          updateColumn: ''\n        });\n      }\n    }\n  };\n\n  deletetData = (updateColumn, updateIndex) => {\n    if (window) {\n      const oldStorage = JSON.parse(localStorage.getItem('data'));\n\n      if (oldStorage && oldStorage[updateColumn]) {\n        const obj = oldStorage;\n        obj[updateColumn].splice(index, 1);\n        console.log(obj, oldStorage);\n        //localStorage.setItem('data', JSON.stringify(obj));\n\n        // this.setState(\n        //   {\n        //     isOpen: !this.state.isOpen,\n        //     updateData: {},\n        //     updateIndex: null,\n        //     updateColumn: ''\n        //   },\n        //   () => {\n        //     this.loadLocalStorage();\n        //   }\n        // );\n      }\n    }\n  };\n\n  render() {\n    const { isOpen, data, updateColumn } = this.state;\n\n    return (\n      <>\n        {this.columns.map(comp => (\n          <FeatureList\n            key={comp}\n            data={data[comp]}\n            column={comp}\n            clickAddJob={this.clickAddJob}\n            updateItem={this.updateItem}\n          />\n        ))}\n        {isOpen && !updateColumn && (\n          <ModalForm handleData={this.handleModalData} />\n        )}\n        {isOpen && updateColumn && (\n          <EditModalForm\n            {...this.state}\n            handleEditModalData={this.handleEditModalData}\n            deletetData={this.deletetData}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default JobsPanel;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AA2CA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAjDA;AAmDA;AACA;AACA;AAFA;AAIA;AACA;AAxDA;AA0DA;AAEA;AADA;AAIA;AACA;AAEA;AACA;AAnEA;AAqEA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AA3FA;AA6FA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AApGA;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAvHA;AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9IA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AAVA;AAWA;AACA;;;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAyGA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAGA;AAEA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;;;;AA5KA;AACA;AA8KA;;;;A","sourceRoot":""}